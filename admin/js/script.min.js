var primal={reactionTime:1e4,reactionTimeout:""};function show(e){e.style.display=""}function hide(e){e.style.display="none"}function showReaction(e){"error"===e.status&&(e.status="fail"),primal.reactionBox.setAttribute("class",e.status),primal.reactionBox.innerHTML=e.text,window.clearTimeout(primal.reactionTimeout),primal.reactionTimeout=window.setTimeout(hideReaction,primal.reactionTime)}function hideReaction(){primal.reactionBox.setAttribute("class","")}function serializeForm(e){var t=[];return"object"==typeof e&&"form"===e.nodeName.toLowerCase()&&Array.prototype.slice.call(e.elements).forEach(function(e){e.name&&!e.disabled&&-1===["file","reset","submit","button"].indexOf(e.type)&&("select-multiple"===e.type?Array.prototype.slice.call(e.options).forEach(function(i){i.selected&&t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(i.value))}):(-1===["checkbox","radio"].indexOf(e.type)||e.checked)&&t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value)))}),t.join("&").replace(/%20/g,"+")+"&ajax=true"}function sendForm(e){e.preventDefault();var t=e.target,i=serializeForm(t),n=new XMLHttpRequest,o=t.getAttribute("action");n.open("POST",o,!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),n.send(i),n.onload=function(){if(this.status>=200&&this.status<400)try{showReaction(JSON.parse(this.responseText))}catch(e){showReaction({status:"fail",text:"Błąd w odpowiedzi."})}else showReaction({status:"fail",text:"Błąd w odpowiedzi."})},n.onerror=function(){showReaction({status:"fail",text:"Błąd w przesyłania danych."})}}document.addEventListener("DOMContentLoaded",function(){if(primal.reactionBox=document.getElementById("primal-reaction"),tinymce.init({selector:".wysiwyg.regular",inline:!0,placeholder:"Twoja treść",plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table contextmenu paste"],toolbar:"insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image"}),null!==document.querySelector(".primal-form")){var e=document.querySelectorAll(".primal-form");Array.prototype.forEach.call(e,function(e,t){e.addEventListener("submit",sendForm)})}primal.reactionBox.addEventListener("click",hideReaction)});